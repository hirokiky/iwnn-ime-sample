(function(p,w){function k(a,d,c){this.name="L10nError";this.message=a;this.id=d;this.loc=c}function z(){}function H(a){function d(b,a){return-1!==a.indexOf(b)}function c(b,a,d){return typeof b===typeof a&&a<=b&&b<=d}var e={0:function(){return"other"},1:function(b){return c(b%100,3,10)?"few":0===b?"zero":c(b%100,11,99)?"many":2===b?"two":1===b?"one":"other"},2:function(b){return 0!==b&&0===b%10?"many":2===b?"two":1===b?"one":"other"},3:function(b){return 1===b?"one":"other"},4:function(b){return c(b,
0,1)?"one":"other"},5:function(b){return c(b,0,2)&&2!==b?"one":"other"},6:function(b){return 0===b?"zero":1===b%10&&11!==b%100?"one":"other"},7:function(b){return 2===b?"two":1===b?"one":"other"},8:function(b){return c(b,3,6)?"few":c(b,7,10)?"many":2===b?"two":1===b?"one":"other"},9:function(b){return 0===b||1!==b&&c(b%100,1,19)?"few":1===b?"one":"other"},10:function(b){return c(b%10,2,9)&&!c(b%100,11,19)?"few":1!==b%10||c(b%100,11,19)?"other":"one"},11:function(b){return c(b%10,2,4)&&!c(b%100,12,
14)?"few":0===b%10||c(b%10,5,9)||c(b%100,11,14)?"many":1===b%10&&11!==b%100?"one":"other"},12:function(b){return c(b,2,4)?"few":1===b?"one":"other"},13:function(b){return c(b%10,2,4)&&!c(b%100,12,14)?"few":1!==b&&c(b%10,0,1)||c(b%10,5,9)||c(b%100,12,14)?"many":1===b?"one":"other"},14:function(b){return c(b%100,3,4)?"few":2===b%100?"two":1===b%100?"one":"other"},15:function(b){return 0===b||c(b%100,2,10)?"few":c(b%100,11,19)?"many":1===b?"one":"other"},16:function(b){return 1===b%10&&11!==b?"one":
"other"},17:function(b){return 3===b?"few":0===b?"zero":6===b?"many":2===b?"two":1===b?"one":"other"},18:function(b){return 0===b?"zero":c(b,0,2)&&0!==b&&2!==b?"one":"other"},19:function(b){return c(b,2,10)?"few":c(b,0,1)?"one":"other"},20:function(b){return!c(b%10,3,4)&&9!==b%10||c(b%100,10,19)||c(b%100,70,79)||c(b%100,90,99)?0===b%1E6&&0!==b?"many":2!==b%10||d(b%100,[12,72,92])?1!==b%10||d(b%100,[11,71,91])?"other":"one":"two":"few"},21:function(b){return 0===b?"zero":1===b?"one":"other"},22:function(b){return c(b,
0,1)||c(b,11,99)?"one":"other"},23:function(b){return c(b%10,1,2)||0===b%20?"one":"other"},24:function(b){return c(b,3,10)||c(b,13,19)?"few":d(b,[2,12])?"two":d(b,[1,11])?"one":"other"}};a={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,
iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,
tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[a.replace(/-.*$/,"")];return a in e?e[a]:function(){return"other"}}function I(a,d){var c={};q||(q={comment:/^\s*#|^\s*$/,entity:/^([^=\s]+)\s*=\s*(.+)$/,multiline:/[^\\]\\$/,macro:/\{\[\s*(\w+)\(([^\)]*)\)\s*\]\}/i,unicode:/\\u([0-9a-fA-F]{1,4})/g,entries:/[\r\n]+/,controlChars:/\\([\\\n\r\t\b\f\{\}\"\'])/g});for(var e=d.split(q.entries),b=0;b<e.length;b++){var f=e[b];if(!q.comment.test(f)){for(;q.multiline.test(f)&&
b<e.length;)f=f.slice(0,-1)+e[++b].trim();if(f=f.match(q.entity))try{var g=f[1],l=f[2],f=c,s=void 0,h=void 0,B=g.indexOf("[");-1!==B?(s=g.substr(0,B),h=g.substring(B+1,g.length-1)):(s=g,h=null);var u=s.split("."),v=void 0;if(1<u.length){var t=[];t.push(u.pop());1<u.length&&-1!==V.indexOf(u[u.length-1])&&t.push(u.pop());s=u.join(".");v=t.reverse().join(".")}else v=null;var m=h,p,h=l;-1!==h.lastIndexOf("\\")&&(h=h.replace(q.controlChars,"$1"));p=W(h);h=s;t=v;s=m;v=p;m=h;t&&(h in f||(f[h]={}),"string"===
typeof f[h]&&(f[h]={_:f[h]}),f=f[h],m=t);if(s){if(!(m in f))f[m]={_:{}};else if("string"===typeof f[m]){var h=f,t=m,n=f[m].match(q.macro);if(!n)throw new k("Malformed macro");h[t]={_index:[n[1],n[2]],_:{}}}f[m]._[s]=v}else f[m]=v}catch(r){if(a)a._emitter.emit("error",r);else throw r;}}}return c}function W(a){return a.replace(q.unicode,function(a,c){return unescape("%u"+"0000".slice(c.length)+c)})}function l(a,d,c){this.id=a;this.env=c;this.dirty=!1;if("string"===typeof d)this.value=d;else{for(var e in d)d.hasOwnProperty(e)&&
"_"!==e[0]&&(this.attributes||(this.attributes={}),this.attributes[e]=new l(this.id+"."+e,d[e],c));this.value=d._||null;this.index=d._index}}function X(a,d,c){var e=0;c=c.replace(J,function(b,c){if(e++>=K)throw new k("Too many placeables ("+e+", max allowed is "+K+")");var g;a:if(a&&a.hasOwnProperty(c)&&("string"===typeof a[c]||"number"===typeof a[c]&&!isNaN(a[c])))g=a[c];else{if(d.hasOwnProperty(c)&&(d[c]instanceof l||(d[c]=new l(c,d[c],d)),g=d[c].resolve(a),"string"===typeof g)){if(g.length>=L)throw new k("Too many characters in placeable ("+
g.length+", max allowed is "+L+")");break a}g=b}return g});e=0;return c}function n(a,d,c,e){if("string"===typeof c)return X(a,d,c);if("boolean"===typeof c||"number"===typeof c||!c)return c;if(e&&a&&a.hasOwnProperty(e[1])){e=a[e[1]];if(0===e&&"zero"in c)return n(a,d,c.zero);if(1===e&&"one"in c)return n(a,d,c.one);if(2===e&&"two"in c)return n(a,d,c.two);e=d.__plural(e);if(c.hasOwnProperty(e))return n(a,d,c[e])}return"other"in c?n(a,d,c.other):w}function Y(a,d){a=a||{};for(var c in d)d.hasOwnProperty(c)&&
(a[c]=new l(c,d[c],a));return a}function r(a,d){this.id=a;this.ctx=d;this.isReady=!1;this.entries={__plural:H(a)}}function M(a){function d(a){if(!this.isReady)throw new k("Context not ready");for(var b=0,c,d;c=this.supportedLocales[b];)if(d=this.getLocale(c),d.isReady||d.build(null),d=d.getEntry(a),d===w)b++,c=new k(a+" not found in "+c,a,c),this._emitter.emit("warning",c);else return d;a=new k(a+" not found",a);this._emitter.emit("error",a);return null}function c(a){this.supportedLocales=a;this.isReady=
!0;this._emitter.emit("ready")}this.id=a;this.isLoading=this.isReady=!1;this.supportedLocales=[];this.resLinks=[];this.locales={};this._emitter=new z;this.get=function(a,b){var c=d.call(this,a);return null===c?"":c.toString(b)||""};this.getEntity=function(a,b){var c=d.call(this,a);return null===c?null:c.valueOf(b)};this.getLocale=function(a){var b=this.locales;return b[a]?b[a]:b[a]=new r(a,this)};this.requestLocales=function(){if(this.isLoading&&!this.isReady)throw new k("Context not ready");this.isLoading=
!0;var a=Array.prototype.slice.call(arguments),b;b=a.concat("en-US");b=-1===b.indexOf(a[0])||"en-US"===a[0]?["en-US"]:[a[0],"en-US"];a=this.getLocale(b[0]);a.isReady?c.call(this,b):a.build(c.bind(this,b))};this.addEventListener=function(a,b){this._emitter.addEventListener(a,b)};this.removeEventListener=function(a,b){this._emitter.removeEventListener(a,b)};this.ready=function(a){this.isReady&&setTimeout(a);this.addEventListener("ready",a)};this.once=function(a){if(this.isReady)setTimeout(a);else{var b=
function(){this.removeEventListener("ready",b);a()}.bind(this);this.addEventListener("ready",b)}}}function C(a,d){a=D[a];D[document.readyState]>=a?d():document.addEventListener("readystatechange",function e(){D[document.readyState]>=a&&(document.removeEventListener("readystatechange",e),d())})}function N(){Z.call(this)?C("interactive",function(){p.setTimeout(A.bind(this))}.bind(this)):A.call(this)}function Z(){var a=document.documentElement.querySelector('script[type="application/l10n"][lang="'+navigator.language+
'"]');if(!a)return!1;var d=this.ctx.getLocale(navigator.language);d.addAST(JSON.parse(a.innerHTML));a={ctx:d,language:{code:d.id,direction:0<=O.indexOf(d.id)?"rtl":"ltr"}};P.call(a);return x=!0}function A(){function a(a){a&&this.ctx._emitter.emit("error",a);0===--f&&Q.call(this)}var d=document.head.querySelectorAll('link[type="application/l10n"]'),c=[],e;for(e=0;e<d.length;e++){var b=d[e].getAttribute("href");"ini"===b.substr(b.lastIndexOf(".")+1)&&c.push(b);this.ctx.resLinks.push(b)}var f=c.length;
if(0===f)Q.call(this);else for(e=0;e<c.length;e++)R.call(this,c[e],a.bind(this))}function Q(){this.ctx.requestLocales(navigator.language);p.addEventListener("languagechange",function(){navigator.mozL10n.language.code=navigator.language})}function S(){var a=new CustomEvent("localized",{bubbles:!1,cancelable:!1,detail:{language:this.ctx.supportedLocales[0]}});p.dispatchEvent(a)}function R(a,d){var c=this.ctx;E.load(a,function(e,b){var f=c.resLinks.indexOf(a);if(e)return c.resLinks.splice(f,1),d(e);
if(!b)return c.resLinks.splice(f,1),d(Error("Empty file: "+a));var g=$(b,a).resources.map(function(a){return a.replace("en-US","{{locale}}")});c.resLinks.splice.apply(c.resLinks,[f,1].concat(g));d()})}function aa(a,d){return"/"===d[0]?d:a.split("/").slice(0,-1).concat(d.split("/")).filter(function(a){return"."!==a}).join("/")}function $(a,d){for(var c=a.split(y.entry),e=["en-US"],b=!0,f=[],g,k=0;k<c.length;k++)g=c[k],b&&y["import"].test(g)?(g=y["import"].exec(g),g=aa(d,g[1]),f.push(g)):y.section.test(g)&&
(b=!1,g=y.section.exec(g),e.push(g[1]));return{locales:e,resources:f}}function P(a){a||(a=document.documentElement,document.documentElement.lang=this.language.code,document.documentElement.dir=this.language.direction);F.call(this,a);a=T(a);for(var d=0;d<a.length;d++)F.call(this,a[d])}function T(a){return a?a.querySelectorAll("*[data-l10n-id]"):[]}function ba(a,d,c){a&&(d?(a.setAttribute("data-l10n-id",d),c&&"object"===typeof c?a.setAttribute("data-l10n-args",JSON.stringify(c)):a.removeAttribute("data-l10n-args"),
this.ctx.isReady&&F.call(this,a)):(a.removeAttribute("data-l10n-id"),a.removeAttribute("data-l10n-args"),G(a,"")))}function U(a){if(!a)return{};var d=a.getAttribute("data-l10n-id");a=(a=a.getAttribute("data-l10n-args"))?JSON.parse(a):null;return{id:d,args:a}}function F(a){var d=U(a);if(d.id&&(d=this.ctx.getEntity(d.id,d.args))){if("string"===typeof d)return G(a,d),!0;d.value&&G(a,d.value);for(var c in d.attributes)if(d.attributes.hasOwnProperty(c)){var e=d.attributes[c],b=c.indexOf(".");-1!==b?a[c.substr(0,
b)][c.substr(b+1)]=e:"ariaLabel"===c?a.setAttribute("aria-label",e):a[c]=e}return!0}}function G(a,d){if(a.firstElementChild){for(var c=!1,e=/\S/,b=a.firstChild;b;b=b.nextSibling)b.nodeType===Node.TEXT_NODE&&e.test(b.nodeValue)&&(c?b.nodeValue="":(b.nodeValue=d,c=!0));c||a.insertBefore(document.createTextNode(d),a.firstChild)}else a.textContent=d}k.prototype=Object.create(Error.prototype);k.prototype.constructor=k;var E={load:function(a,d,c){var e=new XMLHttpRequest;e.overrideMimeType&&e.overrideMimeType("text/plain");
e.open("GET",a,!c);e.addEventListener("load",function(b){200===b.target.status||0===b.target.status?d(null,b.target.responseText):d(new k("Not found: "+a))});e.addEventListener("error",d);e.addEventListener("timeout",d);try{e.send(null)}catch(b){d(new k("Not found: "+a))}},loadJSON:function(a,d){var c=new XMLHttpRequest;c.overrideMimeType&&c.overrideMimeType("application/json");c.open("GET",a);c.responseType="json";c.addEventListener("load",function(b){200===b.target.status||0===b.target.status?d(null,
b.target.response):d(new k("Not found: "+a))});c.addEventListener("error",d);c.addEventListener("timeout",d);try{c.send(null)}catch(e){d(new k("Not found: "+a))}}};z.prototype.emit=function(){if(this._listeners){var a=Array.prototype.slice.call(arguments),d=a.shift();if(this._listeners[d])for(var d=this._listeners[d].slice(),c=0;c<d.length;c++)d[c].apply(this,a)}};z.prototype.addEventListener=function(a,d){this._listeners||(this._listeners={});a in this._listeners||(this._listeners[a]=[]);this._listeners[a].push(d)};
z.prototype.removeEventListener=function(a,d){if(this._listeners){var c=this._listeners[a],e=c.indexOf(d);-1!==e&&c.splice(e,1)}};var V=["style","dataset"],q,L=2500,K=100,J=/\{\{\s*(.+?)\s*\}\}/g;l.prototype.resolve=function(a){if(this.dirty)return w;this.dirty=!0;var d;try{d=n(a,this.env,this.value,this.index)}finally{this.dirty=!1}return d};l.prototype.toString=function(a){try{return this.resolve(a)}catch(d){return w}};l.prototype.valueOf=function(a){if(!this.attributes)return this.toString(a);
var d={value:this.toString(a),attributes:{}},c;for(c in this.attributes)this.attributes.hasOwnProperty(c)&&(d.attributes[c]=this.attributes[c].toString(a));return d};r.prototype.getEntry=function(a){var d=this.entries;return d.hasOwnProperty(a)?d[a]instanceof l?d[a]:d[a]=new l(a,d[a],d):w};r.prototype.build=function(a){function d(b){b&&f._emitter.emit("error",b);0>=--k&&(g.isReady=!0,a&&a())}function c(a,b){!a&&b&&g.addAST(b);d(a)}function e(a,b){if(!a&&b){var c=I(f,b);g.addAST(c)}d(a)}var b=!a,f=
this.ctx,g=this,k=f.resLinks.length;if(0===k)d();else for(var l=0;l<f.resLinks.length;l++){var h=f.resLinks[l].replace("{{locale}}",this.id);switch(h.substr(h.lastIndexOf(".")+1)){case "json":E.loadJSON(h,c,b);break;case "properties":E.load(h,e,b)}}};r.prototype.addAST=function(a){for(var d in a)a.hasOwnProperty(d)&&(this.entries[d]=a[d])};r.prototype.getEntity=function(a,d){var c=this.getEntry(a);return c?c.valueOf(d):null};var x=!1,O="ar he fa ps qps-plocm ur".split(" ");navigator.mozL10n={ctx:new M,
get:function(a,d){return navigator.mozL10n.ctx.get(a,d)},localize:function(a,d,c){return ba.call(navigator.mozL10n,a,d,c)},translate:function(a){return P.call(navigator.mozL10n,a)},ready:function(a){return navigator.mozL10n.ctx.ready(a)},once:function(a){return navigator.mozL10n.ctx.once(a)},get readyState(){return navigator.mozL10n.ctx.isReady?"complete":"loading"},language:{set code(a){navigator.mozL10n.ctx.requestLocales(a)},get code(){return navigator.mozL10n.ctx.supportedLocales[0]},get direction(){return 0<=
O.indexOf(navigator.mozL10n.ctx.supportedLocales[0])?"rtl":"ltr"}},_getInternalAPI:function(){return{Error:k,Context:M,Locale:r,Entity:l,getPluralRule:H,rePlaceables:J,getTranslatableChildren:T,getL10nAttributes:U,loadINI:R,fireLocalizedEvent:S,parse:I,compile:Y}}};navigator.mozL10n.ctx.ready(function(){x||this.translate();x=!1;S.call(this)}.bind(navigator.mozL10n));var D={loading:0,interactive:1,complete:2};if(p.document){x=document.documentElement.lang===navigator.language;if(document.documentElement.dataset.noCompleteBug){N.call(navigator.mozL10n);
return}x?C("interactive",function(){p.setTimeout(A.bind(navigator.mozL10n))}):"complete"===document.readyState?p.setTimeout(A.bind(navigator.mozL10n)):C("interactive",N.bind(navigator.mozL10n))}var y={section:/^\s*\[(.*)\]\s*$/,"import":/^\s*@import\s+url\((.*)\)\s*$/i,entry:/[\r\n]+/}})(this);
var CONV_MODE_ANALYZE=1,CONV_MODE_MULTI_CONV=5,CONV_MODE_CONNECTION_ANALYZE=2,CONST_MAX_INPUT_LEN=50,TOAST_TIMER=3E3,HIDE_IME_TIMER_TRIAL_PERIOD_END=3E3,MAX_UNIT_NUM_PORTRAIT=8,MAX_UNIT_NUM_LANDSCAPE=16,MAX_MORE_CANDIDATE_ROW_NUM=12,MAX_MORE_SYMBOL_CANDIDATE_EMOJI_ROW_NUM=6,TCP_CONNECTION_TIMEOUT_TIMER=700,TCP_PROCESS_TIMEOUT_TIMER=1E3,TCP_MAX_RETRY_COUNT=3,ERR_TCP_PROCESS_TIMEOUT=-1,ERR_TCP_JSON_PARSE=-20001,ERR_TCP_NOT_EXIST_QUEUE=-20002,ERR_TCP_NOT_CLOSE_SOCKET=-20003,CONST_STATUS_TIME={MORNING:32,
NOON:64,NIGHT:128},CONST_MONING_START=300,CONST_MONING_END=630,CONST_NOON_START=600,CONST_NOON_END=1050,CONST_NIGHT_START=1020,CONST_NIGHT_END=330,CONST_STATUS_MONTH={1:4096,2:8192,3:16384,4:32768,5:65536,6:131072,7:262144,8:524288,9:1048576,10:2097152,11:4194304,12:8388608},MAX_CATEGORY_HISTORY=50,DOM_KEYCODE_HARF_YEN=165,TEXT_LAYER0=0,TEXT_LAYER1=1,TEXT_LAYER2=2,TEXT_MAX_LAYER=3,TEXT_MAX_CONVERT_LENGTH=4,USER_DIC_MODE={ADD:0,MOD:1},INPUT_MODE={DIGIT:"digit",NUMERIC:"numeric",PHONETIC:"phonetic",
MOZ_SMS:"-moz-sms",USR_DIC:"iwnn-user-dictionary"},INPUT_TYPE={TEXT:"text",TEXTAREA:"textarea",URL:"url",TEL:"tel",EMAIL:"email",PASSWORD:"password",SEARCH:"search",NUMBER:"number",RANGE:"range"},IME_LAYOUTS={EN:"jp-kanji-en",JP:"jp-kanji",NUM:"jp-kanji-number",NUM_EM:"jp-kanji-number-em",ROMA:"jp-kanji-romaji",EN_FULL:"jp-kanji-en-full",NUM_FULL:"jp-kanji-number-full",NUM_FULL_CAP:"jp-kanji-number-full-cap",NUM_FULL_EM:"jp-kanji-number-full-em",NUM_FULL_CAP_EM:"jp-kanji-number-full-cap-em",TEL:"tel",
NUMBER:"number",DIGIT:"digit"},IME_TYPE={JP:0,EN:1,NUM:2,TEL:3,NUMBER:4,DIGIT:5},IME_MODE={FULL_HIRAGANA:0,FULL_KATAKANA:1,FULL_ALPHABET:2,FULL_NUMBER:3,HALF_NUMBER:4,HALF_ALPHABET:5,HALF_KATAKANA:6},LAYOUT_TYPE={TEN_KEY:0,FULL_KEY:1,FULL_KEY_CAP:2,TEN_KEY_EM:3,FULL_KEY_EM:4,FULL_KEY_CAP_EM:5},IME_SPECIAL_KEY={SPACE:32,BACK:-10,PREVIOUS:-11,NEXT:-12,MARK:-13,TRANSFORM:-14,CASE_CHANGE:-16,FULL:-17,H2K:-18,CAPSLOCK:-19,EN_LAYOUT:-20,NUM_LAYOUT:-21,BASIC_LAYOUT:-22,H2Z:-23,Z2H:-24,SWITCH_KEYBOARD:-3,
TOGGLE_CANDIDATE_PANEL:-4,HIDE_SYMBOL_LIST:-31},KEY_MODE={NORMAL:0,TRANSFORM:1,SELECT:2,H2K:3},CLAUSE_ATTR_MAP={RAW_INPUT:"raw-input",SELECTED_RAW_TEXT:"selected-raw-text",CONVERTED_TEXT:"converted-text",SELECTED_CONVERTED_TEXT:"selected-converted-text"},MIN_FLICK_MOVE_DISTANCE=5,FLICK_DIVISION_NUM=3,LAYOUT_SWITCH=!0,SETTING={VIBRATION:"keyboard.vibration",CLICK_SOUND:"keyboard.clicksound",AUTO_CORRECT:"keyboard.autocorrect",WORD_SUGGESTION:"keyboard.wordsuggestion",INPUT_FLICK:"keyboard.inputflick",
SENSITIVITY_FLICK:"keyboard.sensitivityflick",INPUT_TOGGLE:"keyboard.inputtoggle",INPUT_KEYPOPUP:"keyboard.inputkeypopup",CURSOR_AUTO_MOVE:"keyboard.cursorautomove",LAYOUT_BASIC:{PORTRAIT:"keyboard.layoutjpkanji.portrait",LANDSCAPE:"keyboard.layoutjpkanji.landscape"},LAYOUT_EN:{PORTRAIT:"keyboard.layoutjpkanjien.portrait",LANDSCAPE:"keyboard.layoutjpkanjien.landscape"},LAYOUT_NUM:{PORTRAIT:"keyboard.layoutjpkanjinum.portrait",LANDSCAPE:"keyboard.layoutjpkanjinum.landscape"},CONVERT_ANALYZE:"keyboard.convertanalyze",
CONVERT_LEARN:"keyboard.convertlearn"},IMEKeyMap={"\u3042":0,"\u304b":1,"\u3055":2,"\u305f":3,"\u306a":4,"\u306f":5,"\u307e":6,"\u3084":7,"\u3089":8,"\u308f":9,"\u3001":10,"\u30a2":0,"\u30ab":1,"\u30b5":2,"\u30bf":3,"\u30ca":4,"\u30cf":5,"\u30de":6,"\u30e4":7,"\u30e9":8,"\u30ef":9,"\uff71":0,"\uff76":1,"\uff7b":2,"\uff80":3,"\uff85":4,"\uff8a":5,"\uff8f":6,"\uff94":7,"\uff97":8,"\uff9c":9,"\uff64":10},IMEKeyEnMap={".":0,a:1,d:2,g:3,j:4,m:5,p:6,t:7,w:8,"-":9,",":10},IMENumberTable={1:"\uff11",2:"\uff12",
3:"\uff13",4:"\uff14",5:"\uff15",6:"\uff16",7:"\uff17",8:"\uff18",9:"\uff19",0:"\uff10"},IME_HIRAGANA_CYCLE_TABLE=["\u3042\u3044\u3046\u3048\u304a\u3041\u3043\u3045\u3047\u3049".split(""),["\u304b","\u304d","\u304f","\u3051","\u3053"],["\u3055","\u3057","\u3059","\u305b","\u305d"],"\u305f\u3061\u3064\u3066\u3068\u3063".split(""),["\u306a","\u306b","\u306c","\u306d","\u306e"],["\u306f","\u3072","\u3075","\u3078","\u307b"],["\u307e","\u307f","\u3080","\u3081","\u3082"],"\u3084\u3086\u3088\u3083\u3085\u3087\uff08\uff09".split(""),
["\u3089","\u308a","\u308b","\u308c","\u308d"],["\u308f","\u3092","\u3093","\u308e","\u30fc"],"\u3001\u3002\uff1f\uff01\u30fb\u3000".split("")],IME_HALF_ALPHABET_CYCLE_TABLE=[".@-_/:~1".split(""),"abcABC2".split(""),"defDEF3".split(""),"ghiGHI4".split(""),"jklJKL5".split(""),"mnoMNO6".split(""),"pqrsPQRS7".split(""),"tuvTUV8".split(""),"wxyzWXYZ9".split(""),["-","0"],",.?!; ".split("")],IME_HIRAGANA_CASE_TABLE={"\u3042":"\u3041","\u3044":"\u3043","\u3046":"\u3045","\u3048":"\u3047","\u304a":"\u3049",
"\u3041":"\u3042","\u3043":"\u3044","\u3045":"\u30f4","\u3047":"\u3048","\u3049":"\u304a","\u304b":"\u304c","\u304d":"\u304e","\u304f":"\u3050","\u3051":"\u3052","\u3053":"\u3054","\u304c":"\u304b","\u304e":"\u304d","\u3050":"\u304f","\u3052":"\u3051","\u3054":"\u3053","\u3055":"\u3056","\u3057":"\u3058","\u3059":"\u305a","\u305b":"\u305c","\u305d":"\u305e","\u3056":"\u3055","\u3058":"\u3057","\u305a":"\u3059","\u305c":"\u305b","\u305e":"\u305d","\u305f":"\u3060","\u3061":"\u3062","\u3064":"\u3063",
"\u3066":"\u3067","\u3068":"\u3069","\u3060":"\u305f","\u3062":"\u3061","\u3063":"\u3065","\u3067":"\u3066","\u3069":"\u3068","\u3065":"\u3064","\u30f4":"\u3046","\u306f":"\u3070","\u3072":"\u3073","\u3075":"\u3076","\u3078":"\u3079","\u307b":"\u307c","\u3070":"\u3071","\u3073":"\u3074","\u3076":"\u3077","\u3079":"\u307a","\u307c":"\u307d","\u3071":"\u306f","\u3074":"\u3072","\u3077":"\u3075","\u307a":"\u3078","\u307d":"\u307b","\u3084":"\u3083","\u3086":"\u3085","\u3088":"\u3087","\u3083":"\u3084",
"\u3085":"\u3086","\u3087":"\u3088","\u308f":"\u308e","\u308e":"\u308f","\u309b":"\u309c","\u309c":"\u309b"},IME_FULL_KATAKANA_CASE_TABLE={"\u30a2":"\u30a1","\u30a4":"\u30a3","\u30a6":"\u30a5","\u30a8":"\u30a7","\u30aa":"\u30a9","\u30a1":"\u30a2","\u30a3":"\u30a4","\u30a5":"\u30f4","\u30a7":"\u30a8","\u30a9":"\u30aa","\u30ab":"\u30ac","\u30ad":"\u30ae","\u30af":"\u30b0","\u30b1":"\u30b2","\u30b3":"\u30b4","\u30ac":"\u30ab","\u30ae":"\u30ad","\u30b0":"\u30af","\u30b2":"\u30b1","\u30b4":"\u30b3","\u30b5":"\u30b6",
"\u30b7":"\u30b8","\u30b9":"\u30ba","\u30bb":"\u30bc","\u30bd":"\u30be","\u30b6":"\u30b5","\u30b8":"\u30b7","\u30ba":"\u30b9","\u30bc":"\u30bb","\u30be":"\u30bd","\u30bf":"\u30c0","\u30c1":"\u30c2","\u30c4":"\u30c3","\u30c6":"\u30c7","\u30c8":"\u30c9","\u30c0":"\u30bf","\u30c2":"\u30c1","\u30c3":"\u30c5","\u30c7":"\u30c6","\u30c9":"\u30c8","\u30c5":"\u30c4","\u30f4":"\u30a6","\u30cf":"\u30d0","\u30d2":"\u30d3","\u30d5":"\u30d6","\u30d8":"\u30d9","\u30db":"\u30dc","\u30d0":"\u30d1","\u30d3":"\u30d4",
"\u30d6":"\u30d7","\u30d9":"\u30da","\u30dc":"\u30dd","\u30d1":"\u30cf","\u30d4":"\u30d2","\u30d7":"\u30d5","\u30da":"\u30d8","\u30dd":"\u30db","\u30e4":"\u30e3","\u30e6":"\u30e5","\u30e8":"\u30e7","\u30e3":"\u30e4","\u30e5":"\u30e6","\u30e7":"\u30e8","\u30ef":"\u30ee","\u30ee":"\u30ef"},IME_HALF_KATAKANA_CASE_TABLE={"\uff71":"\uff67","\uff72":"\uff68","\uff73":"\uff69","\uff74":"\uff6a","\uff75":"\uff6b","\uff67":"\uff71","\uff68":"\uff72","\uff69":"\uff73\uff9e","\uff6a":"\uff74","\uff6b":"\uff75",
"\uff76":"\uff76\uff9e","\uff77":"\uff77\uff9e","\uff78":"\uff78\uff9e","\uff79":"\uff79\uff9e","\uff7a":"\uff7a\uff9e","\uff76\uff9e":"\uff76","\uff77\uff9e":"\uff77","\uff78\uff9e":"\uff78","\uff79\uff9e":"\uff79","\uff7a\uff9e":"\uff7a","\uff7b":"\uff7b\uff9e","\uff7c":"\uff7c\uff9e","\uff7d":"\uff7d\uff9e","\uff7e":"\uff7e\uff9e","\uff7f":"\uff7f\uff9e","\uff7b\uff9e":"\uff7b","\uff7c\uff9e":"\uff7c","\uff7d\uff9e":"\uff7d","\uff7e\uff9e":"\uff7e","\uff7f\uff9e":"\uff7f","\uff80":"\uff80\uff9e",
"\uff81":"\uff81\uff9e","\uff82":"\uff6f","\uff83":"\uff83\uff9e","\uff84":"\uff84\uff9e","\uff80\uff9e":"\uff80","\uff81\uff9e":"\uff81","\uff6f":"\uff82\uff9e","\uff83\uff9e":"\uff83","\uff84\uff9e":"\uff84","\uff82\uff9e":"\uff82","\uff8a":"\uff8a\uff9e","\uff8b":"\uff8b\uff9e","\uff8c":"\uff8c\uff9e","\uff8d":"\uff8d\uff9e","\uff8e":"\uff8e\uff9e","\uff8a\uff9e":"\uff8a\uff9f","\uff8b\uff9e":"\uff8b\uff9f","\uff8c\uff9e":"\uff8c\uff9f","\uff8d\uff9e":"\uff8d\uff9f","\uff8e\uff9e":"\uff8e\uff9f",
"\uff8a\uff9f":"\uff8a","\uff8b\uff9f":"\uff8b","\uff8c\uff9f":"\uff8c","\uff8d\uff9f":"\uff8d","\uff8e\uff9f":"\uff8e","\uff94":"\uff6c","\uff95":"\uff6d","\uff96":"\uff6e","\uff6c":"\uff94","\uff6d":"\uff95","\uff6e":"\uff96","\uff9c":"\uff9c","\uff73\uff9e":"\uff73"},MAP_INPUT_FLICK_KEY={12354:["\u3042","\u3044","\u3046","\u3048","\u304a"],12363:["\u304b","\u304d","\u304f","\u3051","\u3053"],12373:["\u3055","\u3057","\u3059","\u305b","\u305d"],12383:["\u305f","\u3061","\u3064","\u3066","\u3068"],
12394:["\u306a","\u306b","\u306c","\u306d","\u306e"],12399:["\u306f","\u3072","\u3075","\u3078","\u307b"],12414:["\u307e","\u307f","\u3080","\u3081","\u3082"],12420:["\u3084","\uff08","\u3086","\uff09","\u3088"],12425:["\u3089","\u308a","\u308b","\u308c","\u308d"],12431:["\u308f","\u3092","\u3093","\u30fc",""],12289:["\u3001","\u3002","\uff1f","\uff01",""],46:[".","@","-","_","1"],97:["a","b","c","","2"],100:["d","e","f","","3"],103:["g","h","i","","4"],106:["j","k","l","","5"],109:["m","n","o","",
"6"],112:["p","q","r","s","7"],116:["t","u","v"," ","8"],119:["w","x","y","z","9"],45:["-","","0","",""],44:[",",".","?","!",""],49:["1",".","@","-",""],50:["2","/",":","_",""],51:["3","~","%","^",""],52:["4","[","`","]","'"],53:["5","<","$",">",String.fromCharCode(DOM_KEYCODE_HARF_YEN)],54:["6","{","&","}",'"'],55:["7","\\","","|",""],56:["8","(","",")",""],57:["9","=","",";",""],42:["*","!","","?",""],48:["0","","+","",""],35:["#",",","",".",""],65297:["\uff11","\uff0e","\uff20","\u30fc",""],65298:["\uff12",
"\uff0f","\uff1a","\uff3f",""],65299:["\uff13","\uff5e","\uff05","\uff3e",""],65300:["\uff14","\uff3b","\u2018","\uff3d","\u2019"],65301:["\uff15","\uff1c","\uff04","\uff1e","\uffe5"],65302:["\uff16","\uff5b","\uff06","\uff5d","\u201d"],65303:["\uff17","\uff3c","","\uff5c",""],65304:["\uff18","\uff08","","\uff09",""],65305:["\uff19","\uff1d","","\uff1b",""],65290:["\uff0a","\uff01","","\uff1f",""],65296:["\uff10","","\uff0b","",""],65283:["\uff03","\u3001","","\u3002",""]},mapRoma={hira:{la:"\u3041",
xa:"\u3041",a:"\u3042",li:"\u3043",lyi:"\u3043",xi:"\u3043",xyi:"\u3043",i:"\u3044",yi:"\u3044",ye:"\u3044\u3047",lu:"\u3045",xu:"\u3045",u:"\u3046",whu:"\u3046",wu:"\u3046",wha:"\u3046\u3041",whi:"\u3046\u3043",wi:"\u3046\u3043",we:"\u3046\u3047",whe:"\u3046\u3047",who:"\u3046\u3049",le:"\u3047",lye:"\u3047",xe:"\u3047",xye:"\u3047",e:"\u3048",lo:"\u3049",xo:"\u3049",o:"\u304a",ca:"\u304b",ka:"\u304b",ga:"\u304c",ki:"\u304d",kyi:"\u304d\u3043",kye:"\u304d\u3047",kya:"\u304d\u3083",kyu:"\u304d\u3085",
kyo:"\u304d\u3087",gi:"\u304e",gyi:"\u304e\u3043",gye:"\u304e\u3047",gya:"\u304e\u3083",gyu:"\u304e\u3085",gyo:"\u304e\u3087",cu:"\u304f",ku:"\u304f",qu:"\u304f",kwa:"\u304f\u3041",qa:"\u304f\u3041",qwa:"\u304f\u3041",qi:"\u304f\u3043",qwi:"\u304f\u3043",qyi:"\u304f\u3043",qwu:"\u304f\u3045",qe:"\u304f\u3047",qwe:"\u304f\u3047",qye:"\u304f\u3047",qo:"\u304f\u3049",qwo:"\u304f\u3049",qya:"\u304f\u3083",qyu:"\u304f\u3085",qyo:"\u304f\u3087",gu:"\u3050",gwa:"\u3050\u3041",gwi:"\u3050\u3043",gwu:"\u3050\u3045",
gwe:"\u3050\u3047",gwo:"\u3050\u3049",ke:"\u3051",ge:"\u3052",co:"\u3053",ko:"\u3053",go:"\u3054",sa:"\u3055",za:"\u3056",ci:"\u3057",shi:"\u3057",si:"\u3057",syi:"\u3057\u3043",she:"\u3057\u3047",sye:"\u3057\u3047",sha:"\u3057\u3083",sya:"\u3057\u3083",shu:"\u3057\u3085",syu:"\u3057\u3085",sho:"\u3057\u3087",syo:"\u3057\u3087",ji:"\u3058",zi:"\u3058",jyi:"\u3058\u3043",zyi:"\u3058\u3043",je:"\u3058\u3047",jye:"\u3058\u3047",zye:"\u3058\u3047",ja:"\u3058\u3083",jya:"\u3058\u3083",zya:"\u3058\u3083",
ju:"\u3058\u3085",jyu:"\u3058\u3085",zyu:"\u3058\u3085",jo:"\u3058\u3087",jyo:"\u3058\u3087",zyo:"\u3058\u3087",su:"\u3059",swa:"\u3059\u3041",swi:"\u3059\u3043",swu:"\u3059\u3045",swe:"\u3059\u3047",swo:"\u3059\u3049",zu:"\u305a",ce:"\u305b",se:"\u305b",ze:"\u305c",so:"\u305d",zo:"\u305e",ta:"\u305f",da:"\u3060",chi:"\u3061",ti:"\u3061",cyi:"\u3061\u3043",tyi:"\u3061\u3043",che:"\u3061\u3047",cye:"\u3061\u3047",tye:"\u3061\u3047",cha:"\u3061\u3083",cya:"\u3061\u3083",tya:"\u3061\u3083",chu:"\u3061\u3085",
cyu:"\u3061\u3085",tyu:"\u3061\u3085",cho:"\u3061\u3087",cyo:"\u3061\u3087",tyo:"\u3061\u3087",di:"\u3062",dyi:"\u3062\u3043",dye:"\u3062\u3047",dya:"\u3062\u3083",dyu:"\u3062\u3085",dyo:"\u3062\u3087",ltsu:"\u3063",ltu:"\u3063",xtu:"\u3063",tsu:"\u3064",tu:"\u3064",tsa:"\u3064\u3041",tsi:"\u3064\u3043",tse:"\u3064\u3047",tso:"\u3064\u3049",du:"\u3065",te:"\u3066",thi:"\u3066\u3043",the:"\u3066\u3047",tha:"\u3066\u3083",thu:"\u3066\u3085",tho:"\u3066\u3087",de:"\u3067",dhi:"\u3067\u3043",dhe:"\u3067\u3047",
dha:"\u3067\u3083",dhu:"\u3067\u3085",dho:"\u3067\u3087",to:"\u3068",twa:"\u3068\u3041",twi:"\u3068\u3043",twu:"\u3068\u3045",twe:"\u3068\u3047",two:"\u3068\u3049","do":"\u3069",dwa:"\u3069\u3041",dwi:"\u3069\u3043",dwu:"\u3069\u3045",dwe:"\u3069\u3047",dwo:"\u3069\u3049",na:"\u306a",ni:"\u306b",nyi:"\u306b\u3043",nye:"\u306b\u3047",nya:"\u306b\u3083",nyu:"\u306b\u3085",nyo:"\u306b\u3087",nu:"\u306c",ne:"\u306d",no:"\u306e",ha:"\u306f",ba:"\u3070",pa:"\u3071",hi:"\u3072",hyi:"\u3072\u3043",hye:"\u3072\u3047",
hya:"\u3072\u3083",hyu:"\u3072\u3085",hyo:"\u3072\u3087",bi:"\u3073",byi:"\u3073\u3043",bye:"\u3073\u3047",bya:"\u3073\u3083",byu:"\u3073\u3085",byo:"\u3073\u3087",pi:"\u3074",pyi:"\u3074\u3043",pye:"\u3074\u3047",pya:"\u3074\u3083",pyu:"\u3074\u3085",pyo:"\u3074\u3087",fu:"\u3075",hu:"\u3075",fa:"\u3075\u3041",fwa:"\u3075\u3041",fi:"\u3075\u3043",fwi:"\u3075\u3043",fyi:"\u3075\u3043",fwu:"\u3075\u3045",fe:"\u3075\u3047",fwe:"\u3075\u3047",fye:"\u3075\u3047",fo:"\u3075\u3049",fwo:"\u3075\u3049",fya:"\u3075\u3083",
fyu:"\u3075\u3085",fyo:"\u3075\u3087",bu:"\u3076",pu:"\u3077",he:"\u3078",be:"\u3079",pe:"\u307a",ho:"\u307b",bo:"\u307c",po:"\u307d",ma:"\u307e",mi:"\u307f",myi:"\u307f\u3043",mye:"\u307f\u3047",mya:"\u307f\u3083",myu:"\u307f\u3085",myo:"\u307f\u3087",mu:"\u3080",me:"\u3081",mo:"\u3082",lya:"\u3083",xya:"\u3083",ya:"\u3084",lyu:"\u3085",xyu:"\u3085",yu:"\u3086",lyo:"\u3087",xyo:"\u3087",yo:"\u3088",ra:"\u3089",ri:"\u308a",ryi:"\u308a\u3043",rye:"\u308a\u3047",rya:"\u308a\u3083",ryu:"\u308a\u3085",
ryo:"\u308a\u3087",ru:"\u308b",re:"\u308c",ro:"\u308d",lwa:"\u308e",xwa:"\u308e",wa:"\u308f",wo:"\u3092",nn:"\u3093",xn:"\u3093",vu:"\u30f4",va:"\u30f4\u3041",vi:"\u30f4\u3043",vyi:"\u30f4\u3043",ve:"\u30f4\u3047",vye:"\u30f4\u3047",vo:"\u30f4\u3049",vya:"\u30f4\u3083",vyu:"\u30f4\u3085",vyo:"\u30f4\u3087",bb:"\u3063b",cc:"\u3063c",dd:"\u3063d",ff:"\u3063f",gg:"\u3063g",hh:"\u3063h",jj:"\u3063j",kk:"\u3063k",ll:"\u3063l",mm:"\u3063m",pp:"\u3063p",qq:"\u3063q",rr:"\u3063r",ss:"\u3063s",tt:"\u3063t",
vv:"\u3063v",ww:"\u3063w",xx:"\u3063x",yy:"\u3063y",zz:"\u3063z","-":"\u30fc",".":"\u3002",", ":"\u3001",nb:"\u3093b",nc:"\u3093c",nd:"\u3093d",nf:"\u3093f",ng:"\u3093g",nh:"\u3093h",nj:"\u3093j",nk:"\u3093k",nl:"\u3093l",nm:"\u3093m",np:"\u3093p",nq:"\u3093q",nr:"\u3093r",ns:"\u3093s",nt:"\u3093t",nv:"\u3093v",nw:"\u3093w",nx:"\u3093x",ny:"\u3093y",nz:"\u3093z"},kana:{la:"\u30a1",xa:"\u30a1",a:"\u30a2",li:"\u30a3",lyi:"\u30a3",xi:"\u30a3",xyi:"\u30a3",i:"\u30a4",yi:"\u30a4",ye:"\u30a4\u30a7",lu:"\u30a5",
xu:"\u30a5",u:"\u30a6",whu:"\u30a6",wu:"\u30a6",wha:"\u30a6\u30a1",whi:"\u30a6\u30a3",wi:"\u30a6\u30a3",we:"\u30a6\u30a7",whe:"\u30a6\u30a7",who:"\u30a6\u30a9",le:"\u30a7",lye:"\u30a7",xe:"\u30a7",xye:"\u30a7",e:"\u30a8",lo:"\u30a9",xo:"\u30a9",o:"\u30aa",ca:"\u30ab",ka:"\u30ab",ga:"\u30ac",ki:"\u30ad",kyi:"\u30ad\u30a3",kye:"\u30ad\u30a7",kya:"\u30ad\u30e3",kyu:"\u30ad\u30e5",kyo:"\u30ad\u30e7",gi:"\u30ae",gyi:"\u30ae\u30a3",gye:"\u30ae\u30a7",gya:"\u30ae\u30e3",gyu:"\u30ae\u30e5",gyo:"\u30ae\u30e7",
cu:"\u30af",ku:"\u30af",qu:"\u30af",kwa:"\u30af\u30a1",qa:"\u30af\u30a1",qwa:"\u30af\u30a1",qi:"\u30af\u30a3",qwi:"\u30af\u30a3",qyi:"\u30af\u30a3",qwu:"\u30af\u30a5",qe:"\u30af\u30a7",qwe:"\u30af\u30a7",qye:"\u30af\u30a7",qo:"\u30af\u30a9",qwo:"\u30af\u30a9",qya:"\u30af\u30e3",qyu:"\u30af\u30e5",qyo:"\u30af\u30e7",gu:"\u30b0",gwa:"\u30b0\u30a1",gwi:"\u30b0\u30a3",gwu:"\u30b0\u30a5",gwe:"\u30b0\u30a7",gwo:"\u30b0\u30a9",ke:"\u30b1",ge:"\u30b2",co:"\u30b3",ko:"\u30b3",go:"\u30b4",sa:"\u30b5",za:"\u30b6",
ci:"\u30b7",shi:"\u30b7",si:"\u30b7",syi:"\u30b7\u30a3",she:"\u30b7\u30a7",sye:"\u30b7\u30a7",sha:"\u30b7\u30e3",sya:"\u30b7\u30e3",shu:"\u30b7\u30e5",syu:"\u30b7\u30e5",sho:"\u30b7\u30e7",syo:"\u30b7\u30e7",ji:"\u30b8",zi:"\u30b8",jyi:"\u30b8\u30a3",zyi:"\u30b8\u30a3",je:"\u30b8\u30a7",jye:"\u30b8\u30a7",zye:"\u30b8\u30a7",ja:"\u30b8\u30e3",jya:"\u30b8\u30e3",zya:"\u30b8\u30e3",ju:"\u30b8\u30e5",jyu:"\u30b8\u30e5",zyu:"\u30b8\u30e5",jo:"\u30b8\u30e7",jyo:"\u30b8\u30e7",zyo:"\u30b8\u30e7",su:"\u30b9",
swa:"\u30b9\u30a1",swi:"\u30b9\u30a3",swu:"\u30b9\u30a5",swe:"\u30b9\u30a7",swo:"\u30b9\u30a9",zu:"\u30ba",ce:"\u30bb",se:"\u30bb",ze:"\u30bc",so:"\u30bd",zo:"\u30be",ta:"\u30bf",da:"\u30c0",chi:"\u30c1",ti:"\u30c1",cyi:"\u30c1\u30a3",tyi:"\u30c1\u30a3",che:"\u30c1\u30a7",cye:"\u30c1\u30a7",tye:"\u30c1\u30a7",cha:"\u30c1\u30e3",cya:"\u30c1\u30e3",tya:"\u30c1\u30e3",chu:"\u30c1\u30e5",cyu:"\u30c1\u30e5",tyu:"\u30c1\u30e5",cho:"\u30c1\u30e7",cyo:"\u30c1\u30e7",tyo:"\u30c1\u30e7",di:"\u30c2",dyi:"\u30c2\u30a3",
dye:"\u30c2\u30a7",dya:"\u30c2\u30e3",dyu:"\u30c2\u30e5",dyo:"\u30c2\u30e7",ltsu:"\u30c3",ltu:"\u30c3",xtu:"\u30c3",tsu:"\u30c4",tu:"\u30c4",tsa:"\u30c4\u30a1",tsi:"\u30c4\u30a3",tse:"\u30c4\u30a7",tso:"\u30c4\u30a9",du:"\u30c5",te:"\u30c6",thi:"\u30c6\u30a3",the:"\u30c6\u30a7",tha:"\u30c6\u30e3",thu:"\u30c6\u30e5",tho:"\u30c6\u30e7",de:"\u30c7",dhi:"\u30c7\u30a3",dhe:"\u30c7\u30a7",dha:"\u30c7\u30e3",dhu:"\u30c7\u30e5",dho:"\u30c7\u30e7",to:"\u30c8",twa:"\u30c8\u30a1",twi:"\u30c8\u30a3",twu:"\u30c8\u30a5",
twe:"\u30c8\u30a7",two:"\u30c8\u30a9","do":"\u30c9",dwa:"\u30c9\u30a1",dwi:"\u30c9\u30a3",dwu:"\u30c9\u30a5",dwe:"\u30c9\u30a7",dwo:"\u30c9\u30a9",na:"\u30ca",ni:"\u30cb",nyi:"\u30cb\u30a3",nye:"\u30cb\u30a7",nya:"\u30cb\u30e3",nyu:"\u30cb\u30e5",nyo:"\u30cb\u30e7",nu:"\u30cc",ne:"\u30cd",no:"\u30ce",ha:"\u30cf",ba:"\u30d0",pa:"\u30d1",hi:"\u30d2",hyi:"\u30d2\u30a3",hye:"\u30d2\u30a7",hya:"\u30d2\u30e3",hyu:"\u30d2\u30e5",hyo:"\u30d2\u30e7",bi:"\u30d3",byi:"\u30d3\u30a3",bye:"\u30d3\u30a7",bya:"\u30d3\u30e3",
byu:"\u30d3\u30e5",byo:"\u30d3\u30e7",pi:"\u30d4",pyi:"\u30d4\u30a3",pye:"\u30d4\u30a7",pya:"\u30d4\u30e3",pyu:"\u30d4\u30e5",pyo:"\u30d4\u30e7",fu:"\u30d5",hu:"\u30d5",fa:"\u30d5\u30a1",fwa:"\u30d5\u30a1",fi:"\u30d5\u30a3",fwi:"\u30d5\u30a3",fyi:"\u30d5\u30a3",fwu:"\u30d5\u30a5",fe:"\u30d5\u30a7",fwe:"\u30d5\u30a7",fye:"\u30d5\u30a7",fo:"\u30d5\u30a9",fwo:"\u30d5\u30a9",fya:"\u30d5\u30e3",fyu:"\u30d5\u30e5",fyo:"\u30d5\u30e7",bu:"\u30d6",pu:"\u30d7",he:"\u30d8",be:"\u30d9",pe:"\u30da",ho:"\u30db",
bo:"\u30dc",po:"\u30dd",ma:"\u30de",mi:"\u30df",myi:"\u30df\u30a3",mye:"\u30df\u30a7",mya:"\u30df\u30e3",myu:"\u30df\u30e5",myo:"\u30df\u30e7",mu:"\u30e0",me:"\u30e1",mo:"\u30e2",lya:"\u30e3",xya:"\u30e3",ya:"\u30e4",lyu:"\u30e5",xyu:"\u30e5",yu:"\u30e6",lyo:"\u30e7",xyo:"\u30e7",yo:"\u30e8",ra:"\u30e9",ri:"\u30ea",ryi:"\u30ea\u30a3",rye:"\u30ea\u30a7",rya:"\u30ea\u30e3",ryu:"\u30ea\u30e5",ryo:"\u30ea\u30e7",ru:"\u30eb",re:"\u30ec",ro:"\u30ed",lwa:"\u30ee",xwa:"\u30ee",wa:"\u30ef",wo:"\u30f2",nn:"\u30f3",
xn:"\u30f3",vu:"\u30f4",va:"\u30f4\u30a1",vi:"\u30f4\u30a3",vyi:"\u30f4\u30a3",ve:"\u30f4\u30a7",vye:"\u30f4\u30a7",vo:"\u30f4\u30a9",vya:"\u30f4\u30e3",vyu:"\u30f4\u30e5",vyo:"\u30f4\u30e7",lka:"\u30f5",xka:"\u30f5",lke:"\u30f6",xke:"\u30f6",bb:"\u30c3b",cc:"\u30c3c",dd:"\u30c3d",ff:"\u30c3f",gg:"\u30c3g",hh:"\u30c3h",jj:"\u30c3j",kk:"\u30c3k",ll:"\u30c3l",mm:"\u30c3m",pp:"\u30c3p",qq:"\u30c3q",rr:"\u30c3r",ss:"\u30c3s",tt:"\u30c3t",vv:"\u30c3v",ww:"\u30c3w",xx:"\u30c3x",yy:"\u30c3y",zz:"\u30c3z",
"-":"\u30fc",".":"\u3002",", ":"\u3001",nb:"\u30f3b",nc:"\u30f3c",nd:"\u30f3d",nf:"\u30f3f",ng:"\u30f3g",nh:"\u30f3h",nj:"\u30f3j",nk:"\u30f3k",nl:"\u30f3l",nm:"\u30f3m",np:"\u30f3p",nq:"\u30f3q",nr:"\u30f3r",ns:"\u30f3s",nt:"\u30f3t",nv:"\u30f3v",nw:"\u30f3w",nx:"\u30f3x",ny:"\u30f3y",nz:"\u30f3z"}},IME_SYMBOL_TAB_NAMES={SYMBOL:"symbol",KAO_MOJI:"kao_moji",EMOJI:"emoji"},IME_SYMBOL_TAB_ORDER=[IME_SYMBOL_TAB_NAMES.SYMBOL,IME_SYMBOL_TAB_NAMES.KAO_MOJI,IME_SYMBOL_TAB_NAMES.EMOJI],OS_MAJOR_VERSION={ONE_THREE:"1.3"},
SETTING_CONTROL_DISABLED={"cb-inputFlick":{on:{"cb-sensitivityFlick":{disabled:!1},sensitivityFlick:{"class":{remove:"setting-disable"}},"cb-inputToggle":{disabled:!1},inputToggle:{"class":{remove:"setting-disable"}}},off:{"cb-sensitivityFlick":{disabled:!0},sensitivityFlick:{"class":{add:"setting-disable"}},"cb-inputToggle":{checked:!0,disabled:!0},inputToggle:{"class":{add:"setting-disable"}}}},"cb-inputToggle":{on:{"sel-cursorAutoMove":{disabled:!1},cursorAutoMove:{"class":{remove:"setting-disable"}}},
off:{"sel-cursorAutoMove":{disabled:!0},cursorAutoMove:{"class":{add:"setting-disable"}}}}},CONV_ENGINE_MAP={INITIALIZE:"11",TERMINATE:"12",LANG_SETTINGS_SPECIFIED:"13",LANG_SETTINGS_SAVED:"14",SETTINGS_FILTERING:"15",ADD_DICTIONARY:"16",KYEBORAD_MODE_SETTINGS:"17",ANALYZE:"31",CONVERSION_MULTIPLE:"32",CONVERSION_EISUKANA:"33",LEARN:"34",DELETE_WORD:"35",DIC_SEARCH:"51",ADD_WORD:"52",CLEAR_DICTIONARY:"53",SAVE_DICTIONARY:"54",GET_DICTIONARY_MODE:"55"},CONV_KEYBOARD_MODE={TEN:"0",FULL:"1"},CONV_DIC_LOAD_FLG=
{OFF:"0",ON:"1"},CONV_ANALYZE_OPTION_DEF={NO:0,NO_RENBUN:1,NO_TANBUN:2,NO_CLEAR_LEARN_CACHE:4,NO_LEARN:5,NO_YOSOKU:16,NO_ZEN:32,HEAD_CONV_ON:1024,HEAD_CONV2_ON:2048,YOMINASI_ON:256,RELATION_ON:512},CONV_ENGINE_LANG_MODE_JAPANESE="0",CONV_DIC_MODE={PREDICTION:"0",EISUKANA:"1",FACE_TEXT:"2",PERSON_NAME:"3",PLACE_NAME:"4",MAIL_ADDRESS:"5",USER:"6",LEARNING:"7",PERSON_NAME_USER:"8",MAIL_ADDRESS_USER:"9",TEL_USER:"10"},CONV_DIC_TYPE={NONE_SPECIFIED:"0",USER:"1",LEARNING:"2",ALL:"3"},CONV_NO_CONV_LEARNING=
"-1",CONV_SEARCH_ORDER={FREQUENCY:"0",READING:"1",REGISTRATION:"2"},CONV_REGISTRY_DIC_CLASS={USER:"0",LEARNING:"1",RESEMBLES:"2"},CONV_RELATION_LEARNING={OFF:"0",ON:"1"},CONV_LEARNING={OFF:"0",ON:"1"},SETTING_CURSOR_AUTO_MOVE_TIME={OFF:0,FAST:700,NORMAL:1200,SLOW:1700},FUNC_PARTS={KEYBOARD:{REPEAT_KEY:"keyboard.repeat_key",SWITCH_LAYOUT_KEY:"keyboard.switch_layout_key",OTHER_KEY:"keyboard.other_key",MINI_KEYBOARD:"keyboard.mini_keyboard"},CANDIDATE:{CANDIDATE_MENU:"candidate.candidate_menu",CANDIDATE:"candidate.candidate",
TOGGLE_BUTTON:"candidate.toggle_button"},SYMBOL_LIST:{CATEGORY:"symbol_list.category",TAB:"symbol_list.tab",CANDIDATE:"symbol_list.candidate"}},CANDIDATE_TYPE={PREDICT:"predict",SYMBOL:"symbol"};
function parseLabel(a){var b="";65536<a?(a-=65536,b=Math.floor(a/1024),a=a%1024+56320,b=String.fromCharCode(b+55296,a)):b=String.fromCharCode(a);return b}
function getMonthTimeCategory(){var a=new Date,b=0,c=60*a.getHours()+(a.getMinutes()-0),a=a.getMonth()+1;c<CONST_NIGHT_END&&(b+=CONST_STATUS_TIME.NIGHT);c>=CONST_MONING_START&&c<=CONST_MONING_END&&(b+=CONST_STATUS_TIME.MORNING);c>=CONST_NOON_START&&c<=CONST_NOON_END&&(b+=CONST_STATUS_TIME.NOON);c>=CONST_NIGHT_START&&(b+=CONST_STATUS_TIME.NIGHT);b+=CONST_STATUS_MONTH[a];return b.toString(16)}
var debugging=!1,debug=function(a){debugging&&(window.dump&&window.dump("JP: "+a+"\n"),console&&console.log&&(console.log("JP: "+a),1<arguments.length&&console.log.apply(this,arguments)))},isClass=function(a,b){var c=Object.prototype.toString.call(b).slice(8,-1);return void 0!==b&&null!==b&&c===a},isUnicode=function(a){return 0===a.indexOf("U+")||0===a.indexOf("\\u")},strWidthLength=function(a){var b=0,c=0;a=escape(a);for(var d=0;d<a.length;d++)if("%"==a.charAt(d)){if("u"==a.charAt(++d)){var f=a.substr(d+
1,4),e=a.substr(d+7,4),f=parseInt(f,16),e=parseInt(e,16);isSurrogatePairCode(f,e)?(d+=6,c++):65377<=f&&65440>=f?b++:c++;d+=3}else e=a.substr(d,2),e=parseInt(e,16),33<=e&&47>=e||58<=e&&64>=e||91<=e&&96>=e||123<=e&&126>=e?b++:c++;d++}else b++;return c+Math.ceil(1.6*b/2)},isSurrogatePairCode=function(a,b){return 55296<=a&&56319>=a&&56320<=b&&57343>=b},isSurrogatePair=function(a){a=escape(a);if("%u"==a.slice(0,2)){var b=a.substr(2,4);a=a.substr(8,4);b=parseInt(b,16);a=parseInt(a,16);return isSurrogatePairCode(b,
a)}return!1},Toast=function(){var a=navigator.mozL10n.get,b=null,c=document.getElementsByTagName("body").item(0),d=document.createElement("div");d.setAttribute("id","toast-out");d.setAttribute("hidden","true");var f=document.createElement("span");f.setAttribute("id","toast");d.appendChild(f);c.appendChild(d);return{show:function(e,c,g){c=g?a(c,g):a(c);f.innerHTML="<p>"+c+"</p>";d.hidden=!1;b&&(window.clearTimeout(b),b=null);b=window.setTimeout(function(){window.clearTimeout(b);b=null;d.hidden=!0},
e)}}}(),Timer=function(){return{start:function(a){},end:function(a,b){}}}();
var DB_NAME="imeKeyboard-db",DB_VERSION=1,imeDB,DB_TABLES={history:{keyPath:{name:"data",autoIncrement:!1},Indexes:{name:"tabName",keys:["tabName"],params:{}}},setting:{keyPath:{name:"setKey",autoIncrement:!1},Indexes:{name:"",keys:[],params:{}},defaultData:[{setKey:SETTING.VIBRATION,value:!1},{setKey:SETTING.CLICK_SOUND,value:!1},{setKey:SETTING.AUTO_CORRECT,value:!0},{setKey:SETTING.WORD_SUGGESTION,value:!0},{setKey:SETTING.INPUT_FLICK,value:!0},{setKey:SETTING.SENSITIVITY_FLICK,value:50},{setKey:SETTING.INPUT_TOGGLE,
value:!0},{setKey:SETTING.INPUT_KEYPOPUP,value:!0},{setKey:SETTING.CURSOR_AUTO_MOVE,value:SETTING_CURSOR_AUTO_MOVE_TIME.NORMAL},{setKey:SETTING.LAYOUT_BASIC.PORTRAIT,value:0},{setKey:SETTING.LAYOUT_BASIC.LANDSCAPE,value:0},{setKey:SETTING.LAYOUT_EN.PORTRAIT,value:0},{setKey:SETTING.LAYOUT_EN.LANDSCAPE,value:0},{setKey:SETTING.LAYOUT_NUM.PORTRAIT,value:0},{setKey:SETTING.LAYOUT_NUM.LANDSCAPE,value:0},{setKey:SETTING.CONVERT_ANALYZE,value:!0},{setKey:SETTING.CONVERT_LEARN,value:!0}]}},IndexedDB={indexedDB:window.indexedDB||
window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB,IDBDatabase:window.IDBDatabase||window.webkitIDBDatabase||window.msIDBDatabase,IDBIndex:window.IDBIndex||window.webkitIDBIndex||window.msIDBIndex,isReady:function(){return!this.indexedDB||this.IDBDatabase.prototype.setVersion||"file:"===window.location.protocol?(debug("IndexedDB is not available on this platform."),!1):!0}};
function deleteDB(){debug("::: deleteDB db start :::");var a=IndexedDB.indexedDB.deleteDatabase(DB_NAME);a.onsuccess=function(b){debug("::: delete DB onsuccess :::")};a.onerror=function(b){debug("::: delete DB onerror :::")}}
function db_onCreate(a){function b(b,c){if(!b)return!1;debug("create: "+c);b.objectStoreNames.contains(c)&&b.deleteObjectStore(c);var a=DB_TABLES[c],f=b.createObjectStore(c,{keyPath:a.keyPath.name},a.keyPath.autoIncrement),g=a.Indexes;null!=g&&g.name&&g.keys&&0<g.keys.length&&f.createIndex(a.Indexes.name,a.Indexes.keys,a.Indexes.params);return!0}debug("::: onCreate db start :::");b(a.target.result,"history");b(a.target.result,"setting");debug("::: created objectStore :::")}
var openDB=function(a){debug("::: openDB");if(imeDB)a&&a(imeDB);else{var b=!1,d=IndexedDB.indexedDB.open(DB_NAME,DB_VERSION);d.onupgradeneeded=function(c){b=!0;db_onCreate(c)};d.onerror=function(b){console.log("open error:"+b)};d.onsuccess=function(c){debug("::: openDB onsuccess:"+c);imeDB=c.target.result;b?setDBDefaultData(function(){a&&a(imeDB)}):a&&a(imeDB)}}},setDBDefaultData=function(a){function b(){c++;a&&c==Object.keys(DB_TABLES).length&&a()}function d(a){var c=a;a=0;for(var d=c;a<d;a++)setDBData(e,
f.defaultData[a],function(){0===--c&&b()})}var c=0,e;for(e in DB_TABLES){var f=DB_TABLES[e];null!=f.defaultData?d(f.defaultData.length):b()}},setDBData=function(a,b,d){debug("::: insertUpdateDBData :tblName["+a+"]");debug(":::                    :data "+(b?b.toSource():null));openDB(function(c){c=c.transaction([a],"readwrite").objectStore(a).put(b);c.onsuccess=function(a){debug("set data onsuccess");d&&d(!0)};c.onerror=function(a){debug("set data onerror")}})},selectDBData=function(a,b,d){debug(":::::: selectDBData :tblName["+
a+"]");openDB(function(c){var e=DB_TABLES[a];c=c.transaction([a],"readonly").objectStore(a);var f=b&&b.data?b.data:null,g=b&&b.index?b.index:null,h=b&&b.sort?b.sort:IDBCursor.NEXT,e=f?isClass("String",f)?c.openCursor(f,h):g&&e.Indexes&&e.Indexes.name?c.index(g).openCursor(f,h):c.openCursor(null,h):c.openCursor(null,h),k=[];e.onerror=function(a){debug("search data onerror")};e.onsuccess=function(a){(a=a.target.result)?(k.push(a.value),a.continue()):d&&d(k)}})},deleteDBData=function(a,b,d){debug(":::::: deleteDBData :tblName["+
a+"]");openDB(function(c){c=c.transaction([a],"readwrite").objectStore(a);c=b?c.delete(b):c.clear();c.onsuccess=function(a){debug("delete data onsuccess");d&&d(!0)};c.onerror=function(a){debug("delete data onerror")}})},resetIndexedDBSettings=function(a){debug(":::::: resetIndexedDBSettings ::::::");deleteDBData("setting",null,function(b){if(b&&(debug(":::::: set default setting data"),b=DB_TABLES.setting,null!=b.defaultData)){var d=b.defaultData.length;[].forEach.call(b.defaultData,function(b,e){setDBData("setting",
b,function(b){0===--d&&a&&a()})})}})},getDBRecordCount=function(a,b,d){debug(":::::: getRecordCount :tblName["+a+"]");openDB(function(c){var e=DB_TABLES[a];c=c.transaction([a],"readonly").objectStore(a);var f=b&&b.data?b.data:null,g=b&&b.index?b.index:null,e=f?isClass("String",f)?c.count(f):g&&e.Indexes&&e.Indexes.name?c.index(g).count(f):c.count(null):c.count(null);e.onerror=function(a){debug("search data onerror")};e.onsuccess=function(a){d&&d(a.target.result)}})};
var webSocket=function(){function f(a){return a="wnn_message="+a.replace(/%20/g,"+")}var a=null,d=[],b=0,g=function(c){b=window.setTimeout(function(){b&&(window.clearTimeout(b),b=0);a&&(a.abort(),a=null);c&&c(ERR_TCP_PROCESS_TIMEOUT)},TCP_PROCESS_TIMEOUT_TIMER)};return{send:function(c,e){try{a||(a=new XMLHttpRequest({mozSystem:!0}),g(e),a.open("POST","http://127.0.0.1:4095",!0),a.onreadystatechange=function(){4==a.readyState&&(debug("***** WebSocket: onreadystatechange completed"),b&&(window.clearTimeout(b),
b=0),200==a.status?(d=JSON.parse(a.responseText),debug("***** WebSocket: status OK   data:"+d)):(d=ERR_TCP_PROCESS_TIMEOUT,debug("***** WebSocket: HTTP Status Error: status:"+a.status+", data:"+a.responseText)),a&&(a.abort(),a=null),e&&e(d))},a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(f(c)),debug("***** WebSocket: send data:"+f(c)))}catch(h){debug("Could not create a web socket: "+h.name)}}}}();
var convWrapper=function(){var q,r,s;function G(){[].forEach.call(e,function(b,c){debug(" *************************** q["+c+"] processId: "+b.processId+", groupId: "+b.groupId)})}function f(){return 0<e.length?e[e.length-1].groupId+1:1}function x(){s=r=q=""}function H(b){switch(b.processId){case CONV_ENGINE_MAP.ANALYZE:case CONV_ENGINE_MAP.CONVERSION_MULTIPLE:case CONV_ENGINE_MAP.CONVERSION_EISUKANA:case CONV_ENGINE_MAP.DIC_SEARCH:break;default:return}var c=[];[].forEach.call(e,function(a,m){b.processId==
a.processId&&(debug("*************************************** del process: "+b.processId+", index:"+m),c.push(m))});for(var a=c.length-1;0<=a;a--)e.splice(c[a],1)}function l(b,c){H(b);isClass("Number",c)&&0<=c&&c<=e.length?e.splice(c,0,b):e.push(b)}function A(){for(var b=[],c=0,a=e.length;c<a;c++)if(e[c].groupId===t)b[b.length]=index;else break;debug(" ---------------------------- remove groupId: "+t);for(c=b.length-1;0<=c;c--)debug(" ---------------------------- remove queue["+c+"]: "+e[b[c]].processId),
debug(" ---------------------------- remove queue["+c+"]: "+e[b[c]].groupId),delete e[b[c]]}function h(b){G();!v&&0<e.length?(v=!0,(g=e.shift())?(t=e.groupId,g.method()):k(ERR_TCP_NOT_EXIST_QUEUE)):b?(g=e.shift(),g.method(),debug(" ----------------- continuity process true id:"+(g?g.processId:null))):debug(" ---------------------------- process true id:"+(g?g.processId:null))}function k(b,c){if(b&&"-19999"==b[0]&&g.processId!=CONV_ENGINE_MAP.SAVE_DICTIONARY){Toast.show(TOAST_TIMER,"trial_period_passed");
var a=null,a=window.setTimeout(function(){window.clearTimeout(a);KeyboardEventHandler.dispatch("hideIME")},HIDE_IME_TIMER_TRIAL_PERIOD_END);e=[]}"string"===typeof b?(debug(" ---------------------------- process error exception: "+(g?g.processId:null)),A()):b===ERR_TCP_PROCESS_TIMEOUT||b===ERR_TCP_JSON_PARSE||b===ERR_TCP_NOT_CLOSE_SOCKET?(debug(" ---------------------------- process timeout cnt:"+u+", id:"+(g?g.processId:null)),u<TCP_MAX_RETRY_COUNT?(g.processId===CONV_ENGINE_MAP.LANG_SETTINGS_SPECIFIED&&
x(),l(g,0),u++):(A(),u=0)):b!==ERR_TCP_NOT_EXIST_QUEUE&&(debug(" ---------------------------- process no error: "+(g?g.processId:null)),u=0,c&&c(b));if(0<e.length){var d=e[0];!g||0>d.groupId||d.groupId!=g.groupId?(v=!1,t=-1,h()):h(!0)}else v=!1,t=-1}function y(b,c,a,d){a=new n(CONV_ENGINE_MAP.INITIALIZE,a,function(){var a=[CONV_ENGINE_MAP.INITIALIZE,getMonthTimeCategory(),b.toString(16)],a=JSON.stringify(a);webSocket.send(a,function(a){"-10001"==a[0]&&(x(),B(CONV_DIC_LOAD_FLG.ON,c,null,0));k(a,c)})});
l(a,d)}function w(b,c,a,d,m,e){if(q!==b||r!==c||s!==a)m=new n(CONV_ENGINE_MAP.LANG_SETTINGS_SPECIFIED,m,function(){if(q!==b||r!==c||s!==a){var m=JSON.stringify([CONV_ENGINE_MAP.LANG_SETTINGS_SPECIFIED,CONV_ENGINE_LANG_MODE_JAPANESE,b,c,a]);webSocket.send(m,function(m){q=b;r=c;s=a;k(m,d)})}else k()}),l(m,e)}function I(b,c,a,d){d=new n(CONV_ENGINE_MAP.ANALYZE,d,function(){var d=[CONV_ENGINE_MAP.ANALYZE,encodeURIComponent(b),""+c,""+c],d=JSON.stringify(d);webSocket.send(d,function(b){k(b,a)})});l(d)}
function J(b,c,a,d){d=new n(CONV_ENGINE_MAP.CONVERSION_MULTIPLE,d,function(){var d=[CONV_ENGINE_MAP.CONVERSION_MULTIPLE,"0",c+"",[encodeURIComponent(b)]],d=JSON.stringify(d);webSocket.send(d,function(b){k(b,a)})});l(d)}function C(b,c,a){a=new n(CONV_ENGINE_MAP.CONVERSION_EISUKANA,a,function(){var a=[CONV_ENGINE_MAP.CONVERSION_EISUKANA,encodeURIComponent(b)],a=JSON.stringify(a);webSocket.send(a,function(a){k(a,c)})});l(a)}function K(b,c,a,d,m,e,f){f=new n(CONV_ENGINE_MAP.LEARN,f,function(){var f=[CONV_ENGINE_MAP.LEARN,
b,c,a,encodeURIComponent(d),encodeURIComponent(m)],f=JSON.stringify(f);webSocket.send(f,function(a){k(a,e)})});l(f)}function L(b,c,a,d){d=new n(CONV_ENGINE_MAP.DELETE_WORD,d,function(){var d=JSON.stringify([CONV_ENGINE_MAP.DELETE_WORD,b,c]);webSocket.send(d,function(b){k(b,a)})});l(d)}function D(b,c,a,d){d=new n(CONV_ENGINE_MAP.DIC_SEARCH,d,function(){var d=JSON.stringify([CONV_ENGINE_MAP.DIC_SEARCH,b,CONV_DIC_MODE.USER,c]);webSocket.send(d,function(b){k(b,a)})});l(d)}function M(b,c,a,d){d=new n(CONV_ENGINE_MAP.ADD_WORD,
d,function(){var d=JSON.stringify([CONV_ENGINE_MAP.ADD_WORD,b,c,"",CONV_REGISTRY_DIC_CLASS.USER,CONV_RELATION_LEARNING.OFF]);webSocket.send(d,function(b){k(b,a)})});l(d)}function E(b,c,a){a=new n(CONV_ENGINE_MAP.CLEAR_DICTIONARY,a,function(){var a=JSON.stringify([CONV_ENGINE_MAP.CLEAR_DICTIONARY,b]);webSocket.send(a,function(a){k(a,c)})});l(a)}function F(b,c,a){a=new n(CONV_ENGINE_MAP.SAVE_DICTIONARY,a,function(){var a=JSON.stringify([CONV_ENGINE_MAP.SAVE_DICTIONARY,CONV_ENGINE_LANG_MODE_JAPANESE,
b]);webSocket.send(a,function(a){k(a,c)})});l(a)}function N(b,c){var a=new n(CONV_ENGINE_MAP.GET_DICTIONARY_MODE,c,function(){var a=JSON.stringify([CONV_ENGINE_MAP.GET_DICTIONARY_MODE]);webSocket.send(a,function(a){k(a,b)})});l(a)}function B(b,c,a,d){a=a?a:f();p(b,c,a,d);b=CONV_ANALYZE_OPTION_DEF.NO_TANBUN;b+=CONV_ANALYZE_OPTION_DEF.HEAD_CONV_ON;y(b,null,a,isClass("Number",d)?d+1:"undefined");h()}function p(b,c,a,d){a=a?a:f();var e=CONV_KEYBOARD_MODE.TEN;"undefined"!==typeof statusManager&&statusManager.isQwerty()&&
(e=CONV_KEYBOARD_MODE.FULL);var g=CONV_DIC_MODE.PREDICTION;"undefined"!==typeof statusManager&&statusManager.isMailDic()&&(g=CONV_DIC_MODE.MAIL_ADDRESS);w(g,e,b,c,a?a:f(),d);h()}function z(b,c,a){a=a?a:f();w(CONV_DIC_MODE.USER,CONV_KEYBOARD_MODE.FULL,b,null,a);y(CONV_ANALYZE_OPTION_DEF.NO,c,a);h()}var v=!1,g=null,t=-1,e=[],u=0;s=r=q="";var n=function(b,c,a){var d=-1;"undefined"!==typeof c&&(d=c);return{processId:b,groupId:d,method:a}};return{clearParam:x,analyze:function(b,c,a){var d=f();p(CONV_DIC_LOAD_FLG.OFF,
null,d);I(b,c,a,d);h()},conversionMultiple:function(b,c,a){var d=f();p(CONV_DIC_LOAD_FLG.OFF,null,d);J(b,c,a,d);h()},conversionEisukana:function(b,c){var a=f();p(CONV_DIC_LOAD_FLG.OFF,null,a);C(b,c,a);h()},learn:function(b,c,a,d,e,g){var k=f();p(CONV_DIC_LOAD_FLG.OFF,null,k);K(b,c,a,d,e,g,k);h()},deleteWord:function(b,c,a){var d=f();L(b,c,a,d);h()},saveDictionary:function(b,c){var a=f();F(b,c,a);h()},jpConvertEngineInit:B,jpConvertEngineModeInit:p,tracEngKana:function(b,c,a){a=a?a:f();C(b,c,a);h()},
tracEngKanaInit:function(b,c,a){a=a?a:f();var d=CONV_KEYBOARD_MODE.TEN;statusManager&&statusManager.isQwerty()&&(d=CONV_KEYBOARD_MODE.FULL);w(b,d,CONV_DIC_LOAD_FLG.OFF,c,a?a:f());h()},tracEngLearnDicAllDel:function(){var b=f();w(CONV_DIC_MODE.LEARNING,CONV_KEYBOARD_MODE.TEN,CONV_DIC_LOAD_FLG.OFF,null,b);y(CONV_ANALYZE_OPTION_DEF.NO,null,b);E(CONV_DIC_TYPE.LEARNING,null,b);F(CONV_DIC_TYPE.LEARNING,null,b);h()},initUserDic:z,addUserDic:function(b,c,a){var d=f();M(b,c,a,d);h()},searchUserDic:function(b,
c){var a=f();z(CONV_DIC_LOAD_FLG.OFF,null,a);D(b,CONV_SEARCH_ORDER.FREQUENCY,c,a);h()},getListUserDic:function(b,c){var a=f();b!=CONV_DIC_MODE.USER&&z(CONV_DIC_LOAD_FLG.ON,null,a);D("",CONV_SEARCH_ORDER.READING,c,a);h()},clearUserDic:function(b){var c=f();E(CONV_DIC_TYPE.USER,b,c);h()},getDicMode:function(b){var c=f();N(b,c);h()}}}();
var dialog=function(){var g,c=null;return{init:function(){c=document.createElement("div");c.setAttribute("id","confirmation-message");c.setAttribute("role","dialog");c.setAttribute("data-type","confirm");c.style.display="none";var b=document.createElement("div");document.createElement("section");var d=document.createElement("h1");d.setAttribute("id","confirm-title");var a=document.createElement("p");a.setAttribute("id","confirm-msg");b.appendChild(d);b.appendChild(a);c.appendChild(b);b=document.createElement("menu");
d=document.createElement("button");d.setAttribute("id","confirm-cancel");a=document.createElement("button");a.setAttribute("id","confirm-agree");b.appendChild(d);b.appendChild(a);c.appendChild(b);document.body.appendChild(c);g=navigator.mozL10n.get;navigator.mozL10n.ready(function(){navigator.mozL10n.translate(document.body)})},showDialog:function(b,d,a,h,k){function l(){h.callback();e.removeEventListener("click",l);f.removeEventListener("click",m)}function m(){k.callback()&&(e.removeEventListener("click",
l),f.removeEventListener("click",m))}if("delete"===b){b=document.getElementById("confirm-title");var n=document.getElementById("confirm-msg");b.textContent=d;n.textContent=a.word||a.read?g(a.msg,{name:a.word+"("+a.read+")"}):g(a.msg)}var e=document.getElementById("confirm-cancel"),f=document.getElementById("confirm-agree");h&&(e.textContent=h.title,e.addEventListener("click",l));k&&(f.textContent=k.title,f.addEventListener("click",m));c.style.display="block"},hideDialog:function(){document.getElementById("confirm-del-section");
document.getElementById("confirm-mod-section");document.getElementById("confirm-agree").removeAttribute("disabled");document.getElementById("confirmation-message").style.display="none"}}}();
var user_dic=function(){function h(){for(var a=document.getElementById("userDicList"),b=a.childNodes.length-1;0<=b;b--)a.removeChild(a.childNodes[b]);convWrapper.getDicMode(function(b){convWrapper.getListUserDic(b[1],function(b){q=[];g=b[0];var d=0;if(0>g)return!1;b.splice(0,2);a=document.getElementById("userDicList");if(""!=b[0]&&0<b.length){var r=!0;b.forEach(function(b){var c=document.createElement("div");c.setAttribute("name","userDicItem");c.addEventListener("click",function(b){for(var d=a.getElementsByTagName("div"),
c=0,e=d.length;c<e;c++)d[c].classList.remove("userDicSelected");b.currentTarget.classList.add("userDicSelected")});var k=document.createElement("ruby"),f=document.createElement("rt"),g=document.createElement("rp"),h=document.createElement("rp"),l=document.createElement("span"),m=document.createElement("div"),n=document.createElement("div"),p=document.createElement("div");m.name="word";n.name="read";p.name="num";r&&(c.classList.add("userDicSelected"),r=!1);f.textContent=decodeURIComponent(b[0]);k.textContent=
decodeURIComponent(b[1]);n.textContent=decodeURIComponent(b[0]);m.textContent=decodeURIComponent(b[1]);p.textContent=decodeURIComponent(b[2]);l.appendChild(n);l.appendChild(m);l.appendChild(p);l.classList.add("userDicHidden");g.innerHTML="(";h.innerHTML=")";k.appendChild(g);k.appendChild(f);k.appendChild(h);c.appendChild(k);c.appendChild(l);a.appendChild(c);q.push({read:b[0],word:b[1],num:b[2]});d++})}else debug("::: user dictionary is no item :::"),b=document.getElementById("userDicList"),b.classList.add("not-registered"),
b.innerHTML=f("user_dic_no_word");u();v(d);convWrapper.saveDictionary(CONV_DIC_TYPE.ALL);w()})})}function s(){var a=document.getElementsByClassName("userDicSelected");if(a&&a[0]){for(var a=a[0].getElementsByTagName("span")[0].getElementsByTagName("div"),b,d,c,e=0,f=a.length;e<f;e++)"read"==a[e].name?b=a[e].textContent:"word"==a[e].name?d=a[e].textContent:"num"==a[e].name&&(c=a[e].textContent);return{read:b,word:d,num:c}}}function t(a){convWrapper.saveDictionary(CONV_DIC_TYPE.USER,a)}var g,q=[],f,
w=function(){if(window.location.search){var a=window.location.search.substring(1);if(0<a.length){var a=a.split("&"),b=[];[].forEach.call(a,function(a){a=a.split("=");2==a.length&&(b[a[0]]=a[1]);b.timer&&b.toastid&&(b.replaceobj?(a=JSON.parse(decodeURIComponent(b.replaceobj)),Toast.show(b.timer,b.toastid,a)):Toast.show(b.timer,b.toastid))})}}},u=function(){var a=document.getElementById("del_dic"),b=document.getElementById("dic_clear"),d=document.getElementById("mod_dic"),c=document.getElementById("add_dic");
c.classList.remove("disabled");a.classList.remove("disabled");d.classList.remove("disabled");b.classList.remove("disabled");var e=document.getElementsByName("userDicItem");100<=e.length?c.classList.add("disabled"):0===e.length&&(a.classList.add("disabled"),d.classList.add("disabled"),b.classList.add("disabled"))},x=function(a,b){0<a.length&&convWrapper.deleteWord(g,a,b)},y=function(a){convWrapper.clearUserDic(a)},z=function(){document.getElementById("del_dic").addEventListener("click",function(){var a=
s();if(a){debug("::: delete item:"+a.num+":::");var b={read:a.read,word:a.word,msg:"user_dic_delete"},d={title:f("cancel"),callback:function(){dialog.hideDialog()}};console.warn("call delete dialog");dialog.showDialog("delete","",b,d,{title:"OK",callback:function(){x(a.num,function(){t(function(){location.href="user_dic.html"+("?timer="+TOAST_TIMER+"&toastid=user_dic_delete_complete");dialog.hideDialog()})})}})}})},A=function(){document.getElementById("dic_clear").addEventListener("click",function(){var a=
{title:f("cancel"),callback:function(){dialog.hideDialog()}};console.warn("call delete dialog");dialog.showDialog("delete","",{msg:"user_dic_clear"},a,{title:"OK",callback:function(){y(function(){t(function(){location.href="user_dic.html"+("?timer="+TOAST_TIMER+"&toastid=user_dic_clear_complete");dialog.hideDialog()})})}})})},B=function(){document.getElementById("mod_dic").addEventListener("click",function(){var a=s();if(a){var b=document.getElementsByName("userDicItem").length;debug("::: lstEl.length:"+
b+":::");100<b?console.warn("ERROR::In order to exceed the maximum value of the user dictionary"):(a="?mode="+USER_DIC_MODE.MOD+"&read="+encodeURIComponent(a.read)+"&word="+encodeURIComponent(a.word)+"&num="+encodeURIComponent(a.num),location.href="user_dic_edit.html"+a)}})},C=function(){document.getElementById("add_dic").addEventListener("click",function(){var a=document.getElementsByName("userDicItem").length;debug("::: lstEl.length:"+a+":::");100<a?console.warn("ERROR::In order to exceed the maximum value of the user dictionary"):
location.href="user_dic_edit.html?mode="+USER_DIC_MODE.ADD})},v=function(a){document.getElementById("dicCount").innerHTML=String(a)+"/100"};(function(){h();var a=document.getElementById("del_dic"),b=document.getElementById("dic_clear"),d=document.getElementById("mod_dic"),c=document.getElementById("add_dic");a&&z();b&&A();d&&B();c&&C();f=navigator.mozL10n.get;navigator.mozL10n.ready(function(){navigator.mozL10n.translate(document.body)});document.addEventListener("mozvisibilitychange",function(){document.mozHidden||
(navigator.mozL10n.language.code=navigator.language,h())},!1)})();dialog.init()}();
